<main class="main container">
  <div class="account">
    <h1>Company</h1>

    <!-- Tabs work not js only css -->
    <div class="tabs">
      <input class="tabs__input" type="radio" name="tabs" id="tab-1" checked />
      <label for="tab-1" class="tabs__item">
        Company Details
        <span class="mobile-name">Details</span>
      </label>

      <input class="tabs__input" type="radio" name="tabs" id="tab-2" />
      <label for="tab-2" class="tabs__item">
        User Management
        <span class="mobile-name">Users</span>
      </label>

      <input class="tabs__input" type="radio" name="tabs" id="tab-3" />
      <label for="tab-3" class="tabs__item">
        Role Management
        <span class="mobile-name">Roles</span>
      </label>

      <div class="tabs__content">
        <fieldset>
          <legend>Legal information</legend>
          <div class="form-row form-group">
            <div class="col-md">
              <label for="name">Company Name</label>
              <input type="text" class="form-control" id="name" [(ngModel)]="companyName"/>
            </div>
            <div class="col-md">
              <label for="number">Tax Number</label>
              <input type="text" class="form-control" id="number" />
            </div>
            <div class="col-md">
              <label for="reg-number">Company Registration Number</label>
              <input type="text" class="form-control" id="reg-number" />
            </div>
          </div>
        </fieldset>
        <fieldset>
          <legend>Procurements service contact</legend>
          <div class="form-row form-group">
            <div class="col-md">
              <label for="phone">Phone</label>
              <input
                placeholder="Enter phone"
                type="text"
                class="form-control"
                id="phone"
              />
            </div>
            <div class="col-md">
              <label for="email">Email</label>
              <input
                placeholder="Enter email"
                type="text"
                class="form-control"
                id="email"
              />
            </div>
            <div class="col-md">
              <label for="person">Contact Person</label>
              <input
                placeholder="Enter name"
                type="text"
                class="form-control"
                id="person"
              />
            </div>
          </div>
        </fieldset>
        <fieldset *ngIf="billingAddress">
          <legend>Billing address</legend>
          <div class="form-row form-group">
            <div class="col-md-6">
              <div class="form-row">
                <div class="col-md">
                  <label for="billing-country">Country</label>
                  <input
                    placeholder="Enter country"
                    type="text"
                    class="form-control"
                    id="billing-country"
                    [(ngModel)]="billingAddress.country"
                  />
                </div>
                <div class="col-md">
                  <label for="billing-city">City</label>
                  <input
                    placeholder="Enter city"
                    type="text"
                    class="form-control"
                    id="billing-city"
                    [(ngModel)]="billingAddress.city"
                  />
                </div>
                <div class="col-md-auto">
                  <label for="billing-code">Postal Code</label>
                  <input
                    placeholder="Code..."
                    type="text"
                    class="form-control form-control--code"
                    id="billing-code"
                    [(ngModel)]="billingAddress.postalCode"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-row">
                <div class="col-md">
                  <label for="billing-address">Address 1</label>
                  <input
                    placeholder="Enter name"
                    type="text"
                    class="form-control"
                    id="billing-address"
                    [(ngModel)]="billingAddress.address1"
                  />
                </div>
                <div class="col-md">
                  <label for="billing-address-2">Address 2</label>
                  <input
                    placeholder="Enter name"
                    type="text"
                    class="form-control"
                    id="billing-address-2"
                    [(ngModel)]="billingAddress.address2"
                  />
                </div>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset *ngIf="shippingAddress">
          <legend>Shipping address</legend>
          <div class="form-row form-group">
            <div class="col-md-6">
              <div class="form-row">
                <div class="col-md">
                  <label for="shipping-country">Country</label>
                  <input
                    placeholder="Enter country"
                    type="text"
                    class="form-control"
                    id="shipping-country"
                    [(ngModel)]="shippingAddress.country"
                  />
                </div>
                <div class="col-md">
                  <label for="shipping-city">City</label>
                  <input
                    placeholder="Enter city"
                    type="text"
                    class="form-control"
                    id="shipping-city"
                    [(ngModel)]="shippingAddress.city"
                  />
                </div>
                <div class="col-md-auto">
                  <label for="shipping-code">Postal Code</label>
                  <input
                    placeholder="Code..."
                    type="text"
                    class="form-control form-control--code"
                    id="shipping-code"
                    [(ngModel)]="shippingAddress.postalCode"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-row">
                <div class="col-md">
                  <label for="shipping-address">Address 1</label>
                  <input
                    placeholder="Enter name"
                    type="text"
                    class="form-control"
                    id="shipping-address"
                    [(ngModel)]="shippingAddress.address1"
                  />
                </div>
                <div class="col-md">
                  <label for="shipping-address-2">Address 2</label>
                  <input
                    placeholder="Enter name"
                    type="text"
                    class="form-control"
                    id="shipping-address-2"
                    [(ngModel)]="shippingAddress.address2"
                  />
                </div>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset>
          <legend>Return Invalid orders to creator</legend>
          <div class="btn-group btn-group--uppercase">
            <a class="btn btn--outline">Yes</a>
            <a class="btn btn--outline btn--active">No</a>
          </div>
        </fieldset>
        <a class="btn btn--green" (click)="updateCompany()">Update Company</a>
      </div>
      <div class="tabs__content">
        <a (click)="openCreateUserModal(content)" class="btn btn--green mb-4">Add new User</a>

        <ng-template #content let-modal>
          <form #myform='ngForm' (ngSubmit)='myform.form.valid && addNewUser(myform)' class='p-3'>
            <div class="form-group">
              <label for="email">Email</label>
              <input id="Useremail" name="email" placeholder="Email" required class="form-control" ngModel #email="ngModel" [ngClass]="{ 'is-invalid': myform.submitted && email.invalid }" email>
              <div *ngIf="myform.submitted && email.invalid" class="invalid-feedback">
                <div *ngIf="email.errors.required">Email is required</div>
                <div *ngIf="email.errors.email">Email must be a valid email address</div>
            </div>
            </div>
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input id="firstName" name="firstName" placeholder="First Name" type="text" class="form-control" [ngClass]="{ 'is-invalid': myform.submitted && firstName.invalid }" required ngModel #firstName="ngModel">
              <div *ngIf="myform.submitted && firstName.invalid" class="invalid-feedback">
                <div *ngIf="firstName.errors.required">First Name is required</div>
              </div>
            </div>
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input id="lastName" name="lastName" placeholder="Last Name" type="text" class="form-control" [ngClass]="{ 'is-invalid': myform.submitted && lastName.invalid }" required ngModel #lastName="ngModel">
              <div *ngIf="myform.submitted && lastName.invalid" class="invalid-feedback">
                <div *ngIf="lastName.errors.required">Last Name is required</div>
              </div>
            </div>
            <div class="form-group">
              <label for="userName">User Name</label>
              <input id="userName" name="userName" placeholder="User Name" type="text" class="form-control" required [ngClass]="{ 'is-invalid': myform.submitted && userName.invalid }" required ngModel #userName="ngModel">
              <div *ngIf="myform.submitted && userName.invalid" class="invalid-feedback">
                <div *ngIf="userName.errors.required">User Name is required</div>
              </div>
            </div>
            <div class="form-group">
              <label for="Password">Password</label>
              <input id="password" name="password" placeholder="Password" type="password" required class="form-control" ngModel #password="ngModel" [ngClass]="{ 'is-invalid': myform.submitted && password.invalid }" required minlength="6">
              <div *ngIf="myform.submitted && password.invalid" class="invalid-feedback">
                <div *ngIf="password.errors.required">Password is required</div>
                <div *ngIf="password.errors.minlength">Password must be at least 6 characters</div>
              </div>
            </div>
            <div class="form-group">
                <select id="selectRole" name="selectRole" class="custom-select" required aria-describedby="selectRoleHelpBlock" [ngClass]="{ 'is-invalid': myform.submitted && role.invalid }" required ngModel #role="ngModel">
                  <option value="" style="display:none">Please select role</option>
                  <option value="org-maintainer">Organization maintainer</option>
                  <option value="org-employee">Organization employee</option>
                </select>
                <div *ngIf="myform.submitted && role.invalid" class="invalid-feedback">
                  <div *ngIf="role.errors.required">Role is required</div>
                </div>
            </div>
            <div class="form-group">
              <button name="submit" type="submit" class="btn btn--green mb-4">Add</button>
            </div>
          </form>
        </ng-template>

        <div class="table-responsive">
          <table class="table">
            <colgroup>
              <col class="col-w-120" />
              <col class="col-w-120" />
              <col class="col-w-120" />
              <col class="col-w-120" />
              <col class="col-w-120" />
              <col class="col-w-140" />
              <col class="col-w-140" />
              <col class="col-w-120" />
            </colgroup>
            <thead>
              <tr>
                <th>Account</th>
                <th>First name</th>
                <th>Last name</th>
                <th>Workflow Role</th>
                <th>System Role</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody *ngFor="let user of users">
              <tr>
                <td>{{user.userName}}</td>
                <td>{{user.firstName}}</td>
                <td>{{user.lastName}}</td>
                <td>Тут workflow role</td>
                <td>{{user.role.name}}</td>
                <td>{{user.email}}</td>
                <td>{{user.phones[0]}}</td>
                <td>
                  <a (click)="deleteUser(user)" class="text--red">Remove user</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tabs__content">
        <a href="#" class="btn btn--green mb-4">Add new Role</a>
        <div class="table-responsive">
          <table class="table">
            <colgroup>
              <col class="col-w-340" />
              <col class="col-w-140" />
              <col class="col-w-140" />
              <col class="col-w-260" />
            </colgroup>
            <thead>
              <tr>
                <th>Role Name</th>
                <th>Role ID</th>
                <th>Creation Date</th>
                <th>Created By</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Agent Provocateur</td>
                <td>0329032</td>
                <td>Tue, 05/03</td>
                <td>Ivanov Peotr</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="page-nav">
      <div class="row align-items-end justify-content-center">
        <div class="col-auto">
          <div class="page-nav__total">You've viewed {{users.length}} of {{paginationInfo.collectionSize}} orders</div>
          <ngb-pagination
          [(page)]="paginationInfo.page"
          [pageSize]="paginationInfo.pageSize"
          [collectionSize]="paginationInfo.collectionSize"
          (pageChange)="pageChanged()"></ngb-pagination>
        </div>
        <div class="col-auto ml-sm-auto">
            Show
            <app-page-size-selector [defaultPageSize]="paginationInfo.pageSize" [pageSizes]="pageSizes" (pageSizeChanged)="pageSizeChanged($event)" ></app-page-size-selector>
        </div>
      </div>
    </div>

  </div>
</main>
